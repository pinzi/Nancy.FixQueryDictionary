name: GitHub Actions
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "🎉 该作业由${{github.event_name}}事件自动触发"
      - run: echo "🐧 此作业现在正在GitHub托管的${{runner.os}}服务器上运行"
      - run: echo "🔎 分支的名称是${{github.ref}}，存储库是${{github.repository}}"
      - name: 签出存储库代码
        uses: actions/checkout@v2
      - run: echo "💡 ${{github.repository}}存储库已克隆到运行程序"
      - run: echo "🖥️ 工作流现在可以在运行程序上测试代码了"
      - name: 列出存储库中的文件
        run: |
          ls ${{ github.workspace }}
      - run: echo "🍏 此作业的状态为${{job.status}}"
      - name: 安装nuget 
        uses: nuget/setup-nuget@v1
        with:        
            nuget-version: '5.x'
      - name: 发布生成包到github和nuget
        run: |
            nuget push ./Nancy.FixQueryDictionary/bin/Release/*.nupkg -Source https://api.nuget.org/v3/index.json -SkipDuplicate -ApiKey ${{secrets.nuget_ApiKey}} -NoSymbol
            nuget push ./Nancy.FixQueryDictionary/bin/Release/*.nupkg -Source github -SkipDuplicate
